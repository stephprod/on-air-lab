<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
	<title>Label - ON-AIR</title>
	<meta name="keywords" content="Download, Apartment, Premium, Real Estate, HMTL, Site Template, property, mortgage, CSS" />
	<meta name="description" content="Label - ON-AIR" />
	<link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
	<link rel="icon" href="favicon.ico" type="image/x-icon">

    <!-- Bootstrap -->
    <link rel="stylesheet" href="/asset/css/bootstrap.min.css">    
	<!-- Font awesome styles -->    
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.2.0/css/all.css" integrity="sha384-hWVjflwFxL6sNzntih27bfxkr27PmbbK/iSvJ+a4+0owXq79v+lsFkW54bOGbiDQ" crossorigin="anonymous">

 
	<!-- Custom styles -->
	<link rel='stylesheet' type='text/css' href='http://fonts.googleapis.com/css?family=Roboto:400,400italic,300,300italic,500,500italic,700,700italic&amp;subset=latin,latin-ext'>
	<link rel="stylesheet" type="text/css" href="/asset/css/plugins.css">
    <link rel="stylesheet" type="text/css" href="/asset/css/apartment-layout.css">
    <link id="skin" rel="stylesheet" type="text/css" href="/asset/css/navy.css">
    <link rel="stylesheet" type="text/css" href="/asset/css/style.css">
	<link href='/asset/css/fullcalendar/fullcalendar.min.css' rel='stylesheet' />
	<link href='/asset/css/fullcalendar/fullcalendar.print.min.css' rel='stylesheet' media='print' />
	<link href="/asset/css/fullcalendar/bootstrap_datetimepicker_build.css" rel="stylesheet" />
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif] -->
    
</head>
<body>
<div class="loader-bg"></div>
<div id="wrapper">

<!-- Page header -->	
	<header>
		<div class="top-bar-wrapper">
			<div class="container top-bar">
				<div class="row">
					<div class="col-xs-5 col-sm-8">
						<div class="top-mail pull-left hidden-xs">
							<span class="top-icon-circle">
								<i class="fa fa-envelope fa-sm"></i>
							</span>
							<span class="top-bar-text">apartment@domain.tld</span>
						</div>
						<div class="top-phone pull-left hidden-xxs">
							<span class="top-icon-circle">
								<i class="fa fa-phone"></i>
							</span>
							<span class="top-bar-text">(0)-123-456-789</span>
						</div>
						<div class="top-localization pull-left hidden-sm hidden-md hidden-xs">
							<span class="top-icon-circle pull-left">
								<i class="fa fa-map-marker"></i>
							</span>
							<span class="top-bar-text">One Brookings Drive St. Louis, Missouri 63130-4899, USA</span>
						</div>
					</div>
					<div class="col-xs-7 col-sm-4">
						<% if (locals.session.userId == undefined){ %>
						<div class="top-social-last top-dark pull-right" data-toggle="tooltip" data-placement="bottom" title="Login/Register">
							<a class="top-icon-circle" href="#login-modal" data-toggle="modal">
								<i class="fa fa-lock"></i>
							</a>
						</div>
						<% }else{ %>
						<div class="top-social-last top-dark pull-right" data-toggle="tooltip" data-placement="bottom" title="Logout">
							<a class="top-icon-circle" href="#logout-modal" data-toggle="modal">
								<i class="fa fa-lock"></i>
							</a>
						</div>
						<% } %>
						
						<div class="top-social pull-right">
							<a class="top-icon-circle" href="#">
								<i class="fa fa-facebook"></i>
							</a>
						</div>
						<div class="top-social pull-right">
							<a class="top-icon-circle" href="#">
								<i class="fa fa-twitter"></i>
							</a>
						</div>
						<div class="top-social pull-right">
							<a class="top-icon-circle" href="#">
								<i class="fa fa-google-plus"></i>
							</a>
						</div>
						<div class="top-social pull-right">
							<a class="top-icon-circle" href="#">
								<i class="fa fa-skype"></i>
							</a>
						</div>
					</div>
				</div>
			</div><!-- /.top-bar -->	
		</div><!-- /.Page top-bar-wrapper -->	
		<nav class="navbar main-menu-cont">
			<div class="container">
				<div class="navbar-header">
					<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
						<span class="sr-only">Toggle navigation</span>
						<span class="icon-bar icon-bar1"></span>
						<span class="icon-bar icon-bar2"></span>
						<span class="icon-bar icon-bar3"></span>
					</button>
					<a href="index-2.html" title="" class="navbar-brand">
						<img src="images/logo-dark.png" alt="Apartment - Premium Real Estate Template" />
					</a>
				</div>
				<div id="navbar" class="navbar-collapse collapse">
					<ul class="nav navbar-nav navbar-right">
						<li class="dropdown">
							<a href="index-2.html" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Home</a>
							<ul class="dropdown-menu">
								<li><a href="index-2.html">Homepage 1 - slider</a></li>
								<li><a href="index-map.html">Homepage 1 - map</a></li>
								<li><a href="index2.html">Homepage 2 - slider</a></li>
								<li><a href="index2-map.html">Homepage 2 - map</a></li>
								<li><a href="index3.html">One Page Single Propery - slider</a></li>
								<li><a href="index3-street-view.html">One Page Single Propery - panorama!</a></li>
							</ul>
						</li>
						<li class="dropdown">
							<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Listings</a>
							<ul class="dropdown-menu">
								<li class="dropdown-submenu">
									<a tabindex="-1" href="listing-grid-right-sidebar.html">Grid Listing</a>
									<ul class="dropdown-menu">
										<li><a href="listing-grid-right-sidebar.html">Right Sidebar</a></li>
										<li><a href="listing-grid-left-sidebar.html">Left Sidebar</a></li>
										<li><a href="listing-grid-no-sidebar.html">No Sidebar</a></li>
									</ul>
								</li>
								<li class="dropdown-submenu">
									<a tabindex="-1" href="listing-masonry-right-sidebar.html">Masonry Listing</a>
									<ul class="dropdown-menu">
										<li><a href="listing-masonry-right-sidebar.html">Right Sidebar</a></li>
										<li><a href="listing-masonry-left-sidebar.html">Left Sidebar</a></li>
										<li><a href="listing-masonry-no-sidebar.html">No Sidebar</a></li>
									</ul>
								</li>
								<li class="dropdown-submenu">
									<a tabindex="-1" href="listing-list-right-sidebar.html">Classic Listing</a>
									<ul class="dropdown-menu">
										<li><a href="listing-list-right-sidebar.html">Right Sidebar</a></li>
										<li><a href="listing-list-left-sidebar.html">Left Sidebar</a></li>
										<li><a href="listing-list-no-sidebar.html">No Sidebar</a></li>
									</ul>
								</li>
								<li class="dropdown-submenu">
									<a tabindex="-1" href="estate-details-right-sidebar.html">Single Property</a>
									<ul class="dropdown-menu">
										<li><a href="estate-details-right-sidebar.html">Right Sidebar</a></li>
										<li><a href="estate-details-left-sidebar.html">Left Sidebar</a></li>
										<li><a href="estate-details-no-sidebar.html">No Sidebar</a></li>
									</ul>
								</li>
							</ul>
						</li>
						<li class="dropdown">
							<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Agencies</a>
							<ul class="dropdown-menu">
								<li class="dropdown-submenu">
									<a tabindex="-1" href="agencies-listing-right-sidebar.html">Agencies Listing</a>
									<ul class="dropdown-menu">
										<li><a href="agencies-listing-right-sidebar.html">Right Sidebar</a></li>
										<li><a href="agencies-listing-left-sidebar.html">Left Sidebar</a></li>
										<li><a href="agencies-listing-no-sidebar.html">No Sidebar</a></li>
									</ul>
								</li>
								<li class="dropdown-submenu">
									<a tabindex="-1" href="agency-details-right-sidebar.html">Agency Details</a>
									<ul class="dropdown-menu">
										<li><a href="agency-details-right-sidebar.html">Right Sidebar</a></li>
										<li><a href="agency-details-left-sidebar.html">Left Sidebar</a></li>
										<li><a href="agency-details-no-sidebar.html">No Sidebar</a></li>
									</ul>
								</li>
								<li class="dropdown-submenu">
									<a tabindex="-1" href="agents-right-sidebar.html">Agents List</a>
									<ul class="dropdown-menu">
										<li><a href="agents-right-sidebar.html">Right Sidebar</a></li>
										<li><a href="agents-left-sidebar.html">Left Sidebar</a></li>
										<li><a href="agents-no-sidebar.html">No Sidebar</a></li>
									</ul>
								</li>
								<li class="dropdown-submenu">
									<a tabindex="-1" href="agent-right-sidebar.html">Agent Details</a>
									<ul class="dropdown-menu">
										<li><a href="agent-right-sidebar.html">Right Sidebar</a></li>
										<li><a href="agent-left-sidebar.html">Left Sidebar</a></li>
										<li><a href="agent-no-sidebar.html">No Sidebar</a></li>
									</ul>
								</li>
							</ul>
						</li>
						<li class="dropdown">
							<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Pages</a>
							<ul class="dropdown-menu">
								<li class="dropdown-submenu">
									<a tabindex="-1" href="typography-no-sidebar.html">Typography &amp; Elements</a>
									<ul class="dropdown-menu">
										<li><a href="typography-no-sidebar.html">No Sidebar</a></li>
										<li><a href="typography-right-sidebar.html">Right Sidebar</a></li>
										<li><a href="typography-left-sidebar.html">Left Sidebar</a></li>
									</ul>
								</li>
								<li><a href="404.html">Error 404</a></li>
								<li class="dropdown-submenu">
									<a tabindex="-1" href="rtl-index.html">RTL Pages</a>
									<ul class="dropdown-menu">
									  <li><a href="rtl-index.html">RTL Homepage</a></li>
									  <li><a href="rtl-page.html">RTL Estate details</a></li>
									</ul>
								</li>
								<li role="separator" class="divider"></li>
								<li><a href="#login-modal" data-toggle="modal">Login</a></li>
								<li><a href="#register-modal" data-toggle="modal">Register</a></li>
								<li><a href="#forgot-modal" data-toggle="modal">Forgotten Password</a></li>
								<li role="separator" class="divider"></li>
								<li><a href="my-offers.html">My account - Offers</a></li>
								<li><a href="my-profile.html">My account - Profile</a></li>
							</ul>
						</li>
						<li class="dropdown">
							<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Blog</a>
							<ul class="dropdown-menu">
								<li><a href="archive-grid.html">Default Grid</a></li>
								<li class="dropdown-submenu">
									<a tabindex="-1" href="archive-grid2-right-sidebar.html">Masonry Grid</a>
									<ul class="dropdown-menu">
										<li><a href="archive-grid2-right-sidebar.html">Right Sidebar</a></li>
										<li><a href="archive-grid2-left-sidebar.html">Left Sidebar</a></li>
										<li><a href="archive-grid2-no-sidebar.html">No Sidebar</a></li>
									</ul>
								</li>
								<li class="dropdown-submenu">
									<a tabindex="-1" href="archive-right-sidebar.html">Classic List</a>
									<ul class="dropdown-menu">
										<li><a href="archive-right-sidebar.html">Right Sidebar</a></li>
										<li><a href="archive-left-sidebar.html">Left Sidebar</a></li>
										<li><a href="archive-no-sidebar.html">No Sidebar</a></li>
									</ul>
								</li>
								<li class="dropdown-submenu">
									<a tabindex="-1" href="blog-right-sidebar.html">Single Post</a>
									<ul class="dropdown-menu">
										<li><a href="blog-right-sidebar.html">Right Sidebar</a></li>
										<li><a href="blog-left-sidebar.html">Left Sidebar</a></li>
										<li><a href="blog-no-sidebar.html">No Sidebar</a></li>
									</ul>
								</li>
							</ul>
						</li>
						<li class="dropdown">
							<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Contact Us</a>
							<ul class="dropdown-menu">
								<li><a href="contact1.html">Contact version 1</a></li>
								<li><a href="contact2.html">Contact version 2</a></li>
							</ul>
						</li>
						<li><a href="submit-property.html" class="special-color">Submit property</a></li>
					</ul>
				</div>
			</div>
		</nav><!-- /.mani-menu-cont -->	
    </header>
	
  		
    <section class="short-image no-padding blog-short-title">
		<div class="container">
			<div class="row">
				<div class="col-xs-12 col-lg-12 short-image-title">
					<h5 class="subtitle-margin second-color">dashboard</h5>
					<h1 class="second-color">Agenda</h1>
					<div class="short-title-separator"></div>
				</div>
			</div>
		</div>
    </section>
	
	<section class="section-light section-top-shadow">
		<div class="container">
			<div class="row">
				<div class="col-xs-12 col-md-3 col-md-push-1">
					<div class="sidebar-left">
						<h3 class="sidebar-title">Welcome back<span class="special-color">.</span></h3>
						<div class="title-separator-primary"></div>
						
						<div class="profile-info margin-top-60">
							<div class="profile-info-title negative-margin">Timothy Johnson</div>
							<img src="images/comment-photo2.jpg" alt="" class="pull-left" />
							<div class="profile-info-text pull-left">
								<p class="subtitle-margin">Agent</p>
								<p class="">42 Estates</p>
								
								<a href="#logout-modal" class="logout-link margin-top-30" data-toggle="modal"><i class="fas fa-lg fa-sign-out-alt"></i>Se déconnecter</a>
							</div>
							<div class="clearfix"></div>
						</div>
						<div class="center-button-cont margin-top-30">
							<a href="/upload-files" class="button-primary button-shadow button-full">
								<span>Mes documents</span>
								<div class="button-triangle"></div>
								<div class="button-triangle2"></div>
								<div class="button-icon"><i class="fa fa-th-list"></i></div>
							</a>
						</div>
						<div class="center-button-cont margin-top-15">
							<a href="/info-pro" class="button-primary button-shadow button-full">
								<span>Mon profil</span>
								<div class="button-triangle"></div>
								<div class="button-triangle2"></div>
								<div class="button-icon"><i class="fa fa-user"></i></div>
							</a>
						</div>
						<div class="center-button-cont margin-top-15">
							<a href="submit-property.html" class="button-alternative button-shadow button-full">
								<span>Une reclamation</span>
								<div class="button-triangle"></div>
								<div class="button-triangle2"></div>
								<div class="button-icon"><i class="jfont fa-lg">&#xe804;</i></div>
							</a>
						</div>
						<div class="title-separator-primary"></div>
						
					</div>
				</div>
				<div class="col-xs-12 col-md-9 col-md-push-1">
					<div data-name="global_msg"></div>
					<div class="col-xs-12 margin-top-60">
						<h3 class="title-negative-margin">Mon agenda<span class="special-color">.</span></h3>
						<div class="title-separator-primary"></div>
					</div>
						<div id='wrap'>
						<div id='external-events'>
						  <h4>Poubelle</h4>
						  <a href="#">
						    <div id='external-events-listing'>
						    	<img src="/asset/images/trash.png" alt="je vais enlever la poubelle et remplacer par une croix sur l'event" style="position: relative;width: 100%">
						    </div>
						  </a>
						    <input type='checkbox' id='drop-remove' checked='checked' style="display: none;"/>
							<div class="datepicker labelled-input-short">
								<span>Horaire d'ouverture</span>
								<div class="clearfix"></div>
								<label for="open">
										<i class="fas fa-door-open icon-social porte-ouverte"></i>
								</label>
								<input id="open" name="ouverture" type="text" class="input-full main-input" placeholder="" value=""/>
								<div class="clearfix"></div>
							</div>
							<div class="datepicker labelled-input-short">
								<span>Horaire de fermeture</span>
								<div class="clearfix"></div>
								<label for="close">
										<i class="fas fa-door-closed icon-social porte-ferme"></i>
								</label>
								<input id="close" name="fermeture" type="text" class="input-full main-input" placeholder="" value=""/>
								<div class="clearfix"></div>
							</div>
						    <p><strong>pour les jours suivants :</strong></p>
							<div class="boxes dark-col">
							  <input type="checkbox" id="lundi">
							  <label for="lundi">Lundi</label>

							  <input type="checkbox" id="mardi">
							  <label for="mardi">Mardi</label>

							  <input type="checkbox" id="mercredi">
							  <label for="mercredi">Mercredi</label>

							  <input type="checkbox" id="jeudi">
							  <label for="jeudi">Jeudi</label>

							  <input type="checkbox" id="vendredi">
							  <label for="vendredi">Vendredi</label>

							  <input type="checkbox" id="samedi">
							  <label for="samedi">Samedi</label>

							  <input type="checkbox" id="dimanche">
							  <label for="dimanche">Dimanche</label>
							</div>
						    <p><strong>pause du midi ou fermeture exeptionnelle de :</strong></p>
							<div class="datepicker">
								<input name="pausedeb" type="text" class="input-full main-input" placeholder="" value=""/>
								<div class="clearfix"></div>
							</div>
						    <p><strong>A :</strong></p>
							<div class="datepicker">
								<input name="pausefin" type="text" class="input-full main-input" placeholder="" value=""/>
								<div class="clearfix"></div>
							</div>
						</div>
						<div id='calendar'></div>
						<div id="dishoraire" class="col-md-9">
							<p class="horaire-align"><strong>Mes horaires :</strong></p>
						<div class="center-button-cont margin-top-15">
							<a href="#" class="savecal button-alternative button-shadow button-full">
								<span>Sauvegarder</span>
								<div class="button-triangle"></div>
								<div class="button-triangle2"></div>
								<div class="button-icon"><i class="jfont fa-lg">&#xe804;</i></div>
							</a>
						</div>
						</div>
						<div style='clear:both'></div>
						</div>
				</div>
					</form>
					<div class="row margin-top-60"></div>
				</div>			
			</div>
		</div>
	</section>
	<footer class="small-cont">
		<div class="container">
			<div class="row">
				<div class="col-xs-12 col-md-6 small-cont">
					<img src="images/logo-light.png" alt="" class="img-responsive footer-logo" />
				</div>
				<div class="col-xs-12 col-md-6 footer-copyrights">
					&copy; Copyright 2015 <a href="http://themeforest.net/user/johnnychaos?ref=johnnychaos" target="blank">Jan Skwara</a>. All rights reserved. Buy on <a href="http://themeforest.net/user/johnnychaos/portfolio?ref=johnnychaos" target="blank">Themeforest</a>.
				</div>
			</div>
		</div>
	</footer>
</div>	

<!-- Move to top button -->

<div class="move-top">
	<div class="big-triangle-second-color"></div>
	<div class="big-icon-second-color"><i class="jfont fa-lg">&#xe803;</i></div>
</div>	

<!-- Login modal -->
	<div class="modal fade apartment-modal" id="login-modal">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-body">
					<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
					<div class="modal-title login-msg">
						<h1>Login<span class="special-color">.</span></h1>
						<div class="short-title-separator"></div>
					</div>
					<input name="login" type="email" class="input-full main-input" placeholder="Email" />
					<input name="password" type="password" class="input-full main-input" placeholder="Your Password" />
					<a href="my-profile.html" class="button-primary button-shadow button-full">
						<span>Sing In</span>
						<div class="button-triangle"></div>
						<div class="button-triangle2"></div>
						<div class="button-icon"><i class="fa fa-user"></i></div>
					</a>
					<a href="#" class="forgot-link pull-right">Forgot your password?</a>
					<div class="clearfix"></div>
					<p class="login-or">OR</p>
					<a href="#" class="facebook-button">
						<i class="fa fa-facebook"></i>
						<span>Login with Facebook</span>
					</a>
					<a href="#" class="google-button margin-top-15">
						<i class="fa fa-google-plus"></i>
						<span>Login with Google</span>
					</a>
					<p class="modal-bottom">Don't have an account? <a href="#" class="register-link">REGISTER</a></p>
				</div>
			</div><!-- /.modal-content -->
		</div><!-- /.modal-dialog -->
	</div><!-- /.modal -->

<!-- Register modal -->
	<div class="modal fade apartment-modal" id="register-modal">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-body">
					<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
					<div class="modal-title">
						<h1>Register<span class="special-color">.</span></h1>
						<div class="short-title-separator"></div>
					</div>
					<input name="first-name" type="text" class="input-full main-input" placeholder="Frist name" />
					<input name="last-name" type="text" class="input-full main-input" placeholder="Last name" />
					<input name="email" type="email" class="input-full main-input" placeholder="Email" />
					<input name="password" type="password" class="input-full main-input" placeholder="Password" />
					<input name="repeat-password" type="password" class="input-full main-input" placeholder="Repeat Password" />
					<a href="my-profile.html" class="button-primary button-shadow button-full">
						<span>Sing up</span>
						<div class="button-triangle"></div>
						<div class="button-triangle2"></div>
						<div class="button-icon"><i class="fa fa-user"></i></div>
					</a>
					<div class="clearfix"></div>
					<p class="login-or">OR</p>
					<a href="#" class="facebook-button">
						<i class="fa fa-facebook"></i>
						<span>Sing Up with Facebook</span>
					</a>
					<a href="#" class="google-button margin-top-15">
						<i class="fa fa-google-plus"></i>
						<span>Sing Up with Google</span>
					</a>
					<p class="modal-bottom">Already registered? <a href="#" class="login-link">SING IN</a></p>
				</div>
			</div><!-- /.modal-content -->
		</div><!-- /.modal-dialog -->
	</div><!-- /.modal -->

<!-- Logout modal -->
	<div class="modal fade apartment-modal" id="logout-modal">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-body">
					<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
					<div class="modal-title logout-msg">
						<h1>Déconnexion<span class="special-color">.</span></h1>
						<div class="short-title-separator"></div>
					</div>
					<a data-action="logout" href="#" class="button-primary button-shadow button-full">
						<span>Se déconnecter</span>
						<div class="button-triangle"></div>
						<div class="button-triangle2"></div>
						<div class="button-icon"><i class="fa fa-user"></i></div>
					</a>
				</div>
			</div><!-- /.modal-content -->
		</div><!-- /.modal-dialog -->
	</div><!-- /.modal -->

<!-- Forgotten password modal -->
	<div class="modal fade apartment-modal" id="forgot-modal">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-body">
					<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
					<div class="modal-title">
						<h1>Forgot your password<span class="special-color">?</span></h1>
						<div class="short-title-separator"></div>
					</div>
					<p class="negative-margin forgot-info">Instert your account email address.<br/>We will send you a link to reset your password.</p>
					<input name="login" type="email" class="input-full main-input" placeholder="Your email" />
					<a href="my-profile.html" class="button-primary button-shadow button-full">
						<span>Reset password</span>
						<div class="button-triangle"></div>
						<div class="button-triangle2"></div>
						<div class="button-icon"><i class="fa fa-user"></i></div>
					</a>
				</div>
			</div><!-- /.modal-content -->
		</div><!-- /.modal-dialog -->
	</div><!-- /.modal -->

<!-- jQuery  -->
    <script type="text/javascript" src="/asset/js/jQuery/jquery.min.js"></script>
	<script type="text/javascript" src="/asset/js/jQuery/jquery-ui.min.js"></script>
	
<!-- Bootstrap-->
    <script type="text/javascript" src="/asset/js/bootstrap.min.js"></script>

<!-- Google Maps -->
	<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?key=AIzaSyDfDCV5hXiPamCIT8_vwGXuzimLQ9MF76g&amp;sensor=false&amp;libraries=places"></script>
	
<!-- plugins script -->
	<script type="text/javascript" src="/asset/js/plugins.js"></script>

<!-- template scripts -->
	<script type="text/javascript" src="/asset/mail/validate.js"></script>
    <script type="text/javascript" src="/asset/js/apartment.js"></script>
    <script type="module" src="/asset/js/logout.js"></script>
	<script src='/asset/js/fullcalendar/moment.min.js'></script>
	<script src='/asset/js/locale/fr.js'></script>
	<script src='/asset/js/fullcalendar/fullcalendar.min.js'></script>
	    <!-- Bootstrap Date time picker -->
	<script language="javascript" src="/asset/js/bootstrap-datetimepicker.js"></script>
<script>

			var lundi;
			var mardi;
			var mercredi;
			var jeudi;
			var vendredi;
			var samedi;
			var dimanche;
			var pause;

    /*  className colors
    
    className: default(transparent), important(red), chill(pink), success(green), info(blue)
    
    */
      
    /* initialize the external events
    -----------------------------------------------------------------*/
  
    $('#external-events div.external-event').each(function() {
    
      // create an Event Object (http://arshaw.com/fullcalendar/docs/event_data/Event_Object/)
      // it doesn't need to have a start or end
      var eventObject = {
        title: $.trim($(this).text()) // use the element's text as the event title
      };
      
      // store the Event Object in the DOM element so we can get to it later
      var t = $(this).data('eventObject', eventObject);
      
      // make the event draggable using jQuery UI
      $(this).draggable({
        zIndex: 999,
        revert: true,      // will cause the event to go back to its
        revertDuration: 0  //  original position after the drag
      });
      
    });
   
    /* initialize the calendar
    -----------------------------------------------------------------*/
    
    var calendar =  $('#calendar').fullCalendar({
      header: {
        left: 'title',
        center: 'agendaDay,agendaWeek,month',
        right: 'prev,next today'
      },
      slotLabelFormat:"HH:mm",
      editable: true,
      firstDay: 1, //  1(Monday) this can be changed to 0(Sunday) for the USA system
      selectable: true,
      defaultView: 'agendaWeek',
      axisFormat: 'h:mm',
      locale: 'fr', // AJOUTER LE FICHIER LOCALS src='fullcalendar/lang-all.js
      eventLimit: true, // for all non-agenda views
      views: {
        agenda: {
          eventLimit: 4 // adjust to 6 only for agendaWeek/agendaDay
        },
      },  	
      selectHelper: true,
      selectConstraint: "businessHours",
		select: function(start, end, allDay) {
		 var title = prompt('Event Title:');
		 if (title) {
			 start = start.format();
			 end = end.format();
			 $.ajax({
				 url: '/agenda',
				 data: 'title='+ title+'&start='+ start +'&end='+ end ,
				 type: "POST",
				 success: function(data) {
					 calendar.fullCalendar('renderEvent',
					 {
					 	 id_event : data[4],
						 title: title,
						 start: start,
						 end: end,
					 },
				 		true // make the event "stick"
				 	);
				 }
			 });
		 }
		 calendar.fullCalendar('unselect');
		},
      eventClick: function(event, jsEvent, view) {
        console.log('Clicked on: ' + event.start.format()+' A : ' + event.end.format());
        console.log('Clicked on: ' + event.title);
        console.log('Clicked on: ' + event.id_event);

        // console.log('Coordinates: ' + jsEvent.id + ',' + jsEvent.pageY);

		// console.log('Current view: ' + view.name);
		var result = confirm('ete vous sur de vouloir supprimer l\'evenement ?');
		if(result){
        	$('#calendar').fullCalendar('removeEvents', event._id);
		      $.ajax({
				      url: '/drop_event_calendar',
				      data: 'id='+event.id_event,
				      type: "POST",
				    success: function(data) {
				 	    console.log("Event "+data+" Mit à la poubelle");
				    }
				})
		}
      },
      droppable: true, // this allows things to be dropped onto the calendar !!!
      dragRevertDuration: 0,
      eventDrop: function(event, date, allDay) { // this function is called when something is dropped
      
        //retrieve the dropped element's stored Event Object
        var originalEventObject = $(this).data('eventObject');
        
        // we need to copy it, so that multiple events don't have a reference to the same object
        var copiedEventObject = $.extend({}, originalEventObject);
        
        // assign it the date that was reported
        copiedEventObject.start = date;
        copiedEventObject.allDay = allDay;
        // render the event on the calendar
        // the last `true` argument determines if the event "sticks" (http://arshaw.com/fullcalendar/docs/event_rendering/renderEvent/)
        
        // is the "remove after drop" checkbox checked?
        if ($('#drop-remove').is(':checked')) {
          // if so, remove the element from the "Draggable Events" list
          $(this).remove();
        }
        
      },
		eventDragStop: function( event, jsEvent, ui, view ) {
		    if(isEventOverDiv(jsEvent.clientX, jsEvent.clientY)) {
		        $('#calendar').fullCalendar('removeEvents', event._id);
		        var el = $( "<div class='fc-event'>" ).appendTo( '#external-events-listing' ).html( event.title );
		        $.ajax({
				 url: '/drop_event_calendar',
				 data: 'id='+event.id_event,
				 type: "POST",
				 success: function(data) {
				 	console.log("Event "+data+" Mit à la poubelle");
				 }
			 })
		    }
		},
		  eventDrop: function(event, delta, revertFunc) {
		  	var start = event.start.format();
		  	var end = event.end.format();
		    alert(event.title + " was dropped on " + event.start.format());

		    if (!confirm("Are you sure about this change?")) {
		    	revertFunc();
		    }
		    else{
			 $.ajax({
				 url: '/update_event_calendar',
				 data: 'start='+ start +'&end='+ end+'&id='+ event.id_event,
				 type: "POST",
				 success: function(data) {
					console.log("Update de "+data.id);
				 }
			 });
		    }
		  },
      eventResize: function(event, delta, revertFunc, jsEvent, ui, view){
        var start = event.start.format();
        var end = event.end.format();
        alert(event.title + " was resized on " + event.end.format());
        if (!confirm("Are you sure about this change?")) {
          revertFunc();
        }
        else{
         $.ajax({
           url: '/update_event_calendar',
           data: 'start='+ start +'&end='+ end+'&id='+ event.id_event,
           type: "POST",
           success: function(data) {
           		console.log("Update de "+data.id);
           		
           }
         });
        }
      },
		//A ACTIVER EN EJS
	    businessHours: <%- locals.dow %>,
		events:<%- locals.eventObj %>
    });
        var isEventOverDiv = function(x, y) {

            var external_events = $( '#external-events' );
            var offset = external_events.offset();
            offset.right = external_events.width() + offset.left;
            offset.bottom = external_events.height() + offset.top;

            // Compare
            if (x >= offset.left
                && y >= offset.top
                && x <= offset.right
                && y <= offset .bottom) { return true; }
            return false;
        };
	    $('.datepicker input').datetimepicker({
	    	format : 'HH:mm',
	    	locale : 'fr',
	    	sideBySide : true,
	    	stepping : 30
	    });
	    //console.log($('.datepicker input').data("DateTimePicker").disable());
	    $('.datepicker input').on("dp.change", function(e){
	    	var target = $(e.target);
	    	var val_open = $('.datepicker input#open').val().replace(":", ".");
	    	var val_close =  $('.datepicker input#close').val().replace(":", ".");
	    	//console.log(target);
	    	if (target.attr("id") == "close"){
	    		if ($('.datepicker input#open').val() != ""){
	    			if (parseFloat(val_open) < parseFloat(val_close))
	    				$('input[type=checkbox]').removeAttr("disabled", "disabled");		
	    		}
	    	}else{
	    		if ($('.datepicker input#close').val() != ""){
	    			if (parseFloat(val_open) < parseFloat(val_close))
	    				$('input[type=checkbox]').removeAttr("disabled", "disabled");		
	    		}
	    	}
	    	//console.log("CHANGE FIRED !");
	    });
		$('input[type=checkbox]').attr("disabled", "disabled");
		$('input[type=checkbox]').change(function(e){
		    if($(this).is(':checked')) {
		        console.log("Checked" +e.target.id);
				$("<p class='horaire-align' id="+e.target.id+">"+e.target.id+" : de "+$('input[name="ouverture"]').val()+" A "+$('input[name="fermeture"]').val()+"</p>").appendTo( "#dishoraire" );
				if (e.target.id == "lundi") {
					lundi = $('input[name="ouverture"]').val()+"-"+$('input[name="fermeture"]').val();
				}if (e.target.id == "mardi") {
					mardi = $('input[name="ouverture"]').val()+"-"+$('input[name="fermeture"]').val();
				}if (e.target.id == "mercredi") {
					mercredi = $('input[name="ouverture"]').val()+"-"+$('input[name="fermeture"]').val();
				}if (e.target.id == "jeudi") {
					jeudi = $('input[name="ouverture"]').val()+"-"+$('input[name="fermeture"]').val();
				}if (e.target.id == "vendredi") {
					vendredi = $('input[name="ouverture"]').val()+"-"+$('input[name="fermeture"]').val();
				}if (e.target.id == "samedi") {
					samedi = $('input[name="ouverture"]').val()+"-"+$('input[name="fermeture"]').val();
				}if (e.target.id == "dimanche") {
					dimanche = $('input[name="ouverture"]').val()+"-"+$('input[name="fermeture"]').val();
				}
		    } else {
		        console.log("pas Checked" +e.target.id);
		        $("p").remove("#"+e.target.id)
				if (e.target.id == "lundi") {
					lundi = null;
				}if (e.target.id == "mardi") {
					mardi = null;
				}if (e.target.id == "mercredi") {
					mercredi = null;
				}if (e.target.id == "jeudi") {
					jeudi = null;
				}if (e.target.id == "vendredi") {
					vendredi = null;
				}if (e.target.id == "samedi") {
					samedi = null;
				}if (e.target.id == "dimanche") {
					dimanche = null;
				}
		    }
		});
		$('.savecal').click(function(ev){
			ev.preventDefault();
			pause = $('input[name="pausedeb"]').val()+"-"+$('input[name="pausefin"]').val();
		    console.log(lundi+" / "+mardi+" / "+mercredi+" / "+jeudi+" / "+vendredi+" / "+samedi+" / "+dimanche+" / "+pause);
			 $.ajax({
				 url: '/calendar_dow',
				 data: 'lundi='+lundi+'&mardi='+mardi+'&mercredi='+mercredi+'&jeudi='+jeudi+'&vendredi='+vendredi+'&samedi='+samedi+'&dimanche='+dimanche+'&pause='+pause ,
				 type: "POST",
				 success: function(data) {
					console.log(data);
					localStorage.setItem("datas", JSON.stringify(data));
					document.location = "/agenda";
				 }
			 });
		});
		function update_front_with_errors(tabErr){
		update_front_with_success();
		$.each(tabErr, function (ind, val){
			var elem = $("[name="+ind+"]");
			var title = "";
			//console.log(elem);
			elem.attr("data-toggle", "tooltip");
			$.each(val, function (i, v){
				title += "- "+v+"\n";
			});
			if (elem.is("select[name='cp']")){
				console.log(elem.selectpicker());
				elem.selectpicker();
				elem.selectpicker({title: title}).selectpicker('render');
				var html = '';
    			elem.html(html);
				elem.selectpicker("refresh");
			}else{
				elem.attr("data-title", title);
				elem.attr("data-original-title", title);
			}
		});
		$('[data-toggle="tooltip"]').tooltip('enable');
	}
	function update_front_with_msg(ret){
		var content = "";
		$.each(ret, function (ind, val){
			var elem = $("[data-name="+ind+"]");
			//console.log(elem);
			elem.empty();
			if (ind == "global_msg"){
				$.each(val, function (i, v){
					if (!ret.success[i])
						content += '<div class="error-box margin-top-30"><p>'+v+'</p><div class="small-triangle"></div><div class="small-icon"><i class="jfont">&#xe80f;</i></div></div>';
					else{
						content += '<div class="success-box margin-top-30"><p>'+v+'</p><div class="small-triangle"></div><div class="small-icon"><i class="jfont">&#xe816;</i></div></div>';
					}
				});
				elem.append(content);		
			}
		});
		//$('[data-toggle="tooltip"]').tooltip();
	}
	function update_front_with_success(){
		$('[data-toggle="tooltip"]').tooltip('disable');
		$.each($("[name]"), function (ind, val){
			var elem = $(val);
			if (elem.is("select")){
				elem.selectpicker();
				elem.selectpicker({title: "Sélectionner :"}).selectpicker('render');
				elem.selectpicker("refresh");
			} else{
				$(this).removeAttr("data-title");
				$(this).removeAttr("data-original-title");
			}
			$(this).removeAttr("data-toggle");
		});
		//$('[data-toggle="tooltip"]').tooltip();
		//console.log($('[data-toggle="tooltip"]'));
		
	}
	window.onload = function() {
		var session_data = JSON.parse(localStorage.getItem("datas"));
		//console.log(session_data);
		//console.log(localStorage);
		localStorage.clear();
		if (session_data != null){
			update_front_with_msg(session_data);
			if (session_data.errors !== undefined){
				update_front_with_errors(session_data.errors);
			}
			else{
				update_front_with_success();
			}
		}
	}
</script>
	<script>
    	var user = {};
		var session = {};
		user.id = "<%- locals.session.userId != undefined ? 
			locals.session.userId : "null" %>";
		user.nom = "<%- locals.session.userName ? 
			locals.session.userName : "null" %>";
		user.type = "<%- locals.session.userType ? 
			locals.session.userType : "null" %>";
		//console.log(session);
		session.user = user;
		sessionStorage.setItem("session", JSON.stringify(session));
    </script>
	</body>
</html>